<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="AYSÄ°MA MEDÄ°KAL - Kaliteli SaÄŸlÄ±k ÃœrÃ¼nleri">
<title>AYSÄ°MA MEDÄ°KAL | SaÄŸlÄ±k Marketiniz</title>
<style>
:root {
--bordo: #7b1e2b;
--arka-plan: #f4f6f9;
--border: #e1e4e8;
--success: #27ae60;
--danger: #e74c3c;
--text-dark: #2c3e50;
}
* { box-sizing: border-box; }
body {
margin: 0;
font-family: 'Segoe UI', Tahoma, Geneva, sans-serif;
background-color: var(--arka-plan);
overflow-x: hidden;
color: var(--text-dark);
}
/* Header TasarÄ±mÄ± */
header {
background: #fff;
padding: 12px 5%;
display: flex;
align-items: center;
justify-content: space-between;
border-bottom: 2px solid var(--border);
position: sticky;
top: 0;
z-index: 1000;
box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
.header-left {
display: flex;
align-items: center;
gap: 12px;
text-decoration: none;
min-width: 200px;
}
.header-left img {
height: 50px;
width: auto;
object-fit: contain;
}
.brand-name {
font-size: 20px;
font-weight: 800;
color: var(--bordo);
letter-spacing: -0.5px;
text-decoration: none;
}
.search-box {
flex-grow: 1;
max-width: 450px;
margin: 0 30px;
display: flex;
}
.search-box input {
width: 100%;
padding: 10px 15px;
border: 1px solid var(--border);
border-radius: 4px 0 0 4px;
outline: none;
background: #f9f9f9;
font-size: 14px;
transition: border-color 0.2s;
}
.search-box input:focus {
border-color: var(--bordo);
background: white;
}
.search-box button {
background: var(--bordo);
color: white;
border: none;
padding: 0 20px;
border-radius: 0 4px 4px 0;
cursor: pointer;
font-weight: bold;
transition: opacity 0.2s;
}
.search-box button:hover { opacity: 0.9; }
.header-right {
display: flex;
align-items: center;
gap: 20px;
}
.cart-btn {
background: var(--bordo);
color: white;
padding: 8px 16px;
border-radius: 20px;
cursor: pointer;
display: flex;
align-items: center;
gap: 8px;
font-weight: 600;
font-size: 14px;
transition: all 0.2s;
border: 2px solid var(--bordo);
position: relative;
}
.cart-btn:hover {
background: transparent;
color: var(--bordo);
}
/* Sepet SayÄ±sÄ± Badge */
#cart-count {
background: var(--danger);
color: white;
border-radius: 50%;
width: 20px;
height: 20px;
display: flex;
align-items: center;
justify-content: center;
font-size: 12px;
}
/* Sepet Paneli */
#cart-sidebar {
position: fixed;
right: -400px;
top: 0;
width: 340px;
height: 100%;
background: white;
z-index: 2001;
transition: right 0.3s ease-in-out;
box-shadow: -5px 0 15px rgba(0,0,0,0.15);
padding: 25px;
display: flex;
flex-direction: column;
overflow: hidden;
}
#cart-sidebar.open { right: 0; }
#overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0,0,0,0.5);
display: none;
z-index: 2000;
backdrop-filter: blur(3px);
}
#overlay.active { display: block; }
/* ÃœrÃ¼n KartlarÄ± */
.content {
max-width: 1300px;
margin: 25px auto;
padding: 0 20px;
}
.grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
gap: 25px;
}
.card {
background: #fff;
border: 1px solid var(--border);
border-radius: 8px;
padding: 18px;
display: flex;
flex-direction: column;
transition: all 0.3s ease;
box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
.card:hover {
transform: translateY(-5px);
box-shadow: 0 8px 20px rgba(0,0,0,0.1);
border-color: var(--bordo);
}
.product-image {
height: 140px;
background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
margin-bottom: 15px;
display: flex;
align-items: center;
justify-content: center;
color: #bdc3c7;
border-radius: 4px;
font-weight: 600;
}
.product-name {
font-weight: 600;
font-size: 15px;
height: auto;
min-height: 42px;
overflow: hidden;
color: var(--text-dark);
line-height: 1.4;
}
.variants-container {
margin: 12px 0;
min-height: 40px;
display: flex;
flex-wrap: wrap;
gap: 6px;
}
.v-btn {
border: 1.5px solid #ddd;
background: #fff;
padding: 6px 10px;
border-radius: 5px;
font-size: 12px;
cursor: pointer;
margin: 0;
font-weight: 600;
color: #666;
transition: all 0.2s;
white-space: nowrap;
}
.v-btn:hover {
border-color: var(--bordo);
color: var(--bordo);
}
.v-btn.selected {
border-color: var(--bordo);
color: white;
background: var(--bordo);
}
.price-display {
font-size: 24px;
font-weight: 800;
color: var(--bordo);
margin: 15px 0;
}
.buy-btn {
background: var(--bordo);
color: white;
border: none;
padding: 12px;
border-radius: 6px;
cursor: pointer;
font-weight: bold;
width: 100%;
transition: all 0.2s;
font-size: 14px;
}
.buy-btn:hover {
background: #5a1620;
transform: scale(1.02);
}
.buy-btn:disabled {
background: #bdc3c7;
cursor: not-allowed;
transform: none;
}
/* WhatsApp Butonu */
.wa-float {
position: fixed;
bottom: 25px;
right: 25px;
background: #25d366;
width: 60px;
height: 60px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
box-shadow: 0 4px 12px rgba(0,0,0,0.2);
z-index: 1000;
text-decoration: none;
font-size: 32px;
transition: all 0.3s;
border: none;
}
.wa-float:hover {
transform: scale(1.15);
box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
}
/* Navigasyon */
nav {
background: #fff;
border-bottom: 1px solid var(--border);
display: flex;
justify-content: center;
overflow-x: auto;
position: sticky;
top: 70px;
z-index: 999;
}
.nav-link {
padding: 15px 20px;
text-decoration: none;
color: #666;
font-size: 13px;
font-weight: 700;
cursor: pointer;
white-space: nowrap;
transition: all 0.2s;
border-bottom: 3px solid transparent;
}
.nav-link:hover {
color: var(--bordo);
border-bottom-color: var(--bordo);
}
/* BoÅŸ Sepet Durumu */
.empty-cart {
text-align: center;
color: #999;
padding: 40px 20px;
font-size: 14px;
}
/* Responsive */
@media (max-width: 768px) {
header { flex-wrap: wrap; }
.search-box { max-width: 100%; margin: 10px 0 0 0; }
.grid { grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); }
#cart-sidebar { width: 100%; right: -100%; }
}
</style>
</head>
<body>
<div id="overlay" onclick="window.toggleCart(false)"></div>
<header>
<a href="#" class="header-left" onclick="location.reload(); return false;">
<img src="logo.png" alt="AYSÄ°MA MEDÄ°KAL">
<span class="brand-name">AYSÄ°MA MEDÄ°KAL</span>
</a>
<div class="search-box">
<input type="text" placeholder="AradÄ±ÄŸÄ±nÄ±z Ã¼rÃ¼nÃ¼ yazÄ±n..." onkeyup="window.doSearch(this.value)">
<button onclick="window.doSearch(document.querySelector('.search-box input').value)">ARA</button>
</div>
<div class="header-right">
<button class="cart-btn" onclick="window.toggleCart(true)">
ðŸ›’ Sepetim <span id="cart-count">0</span>
</button>
</div>
</header>
<nav id="navbar">
<a class="nav-link" onclick="location.reload(); return false;">TÃœM ÃœRÃœNLER</a>
</nav>
<div class="content">
<h2 id="page-name" style="font-size: 22px; margin-bottom: 25px; color: var(--text-dark);">TÃ¼m ÃœrÃ¼nler</h2>
<div class="grid" id="product-grid">ÃœrÃ¼nler yÃ¼kleniyor...</div>
</div>
<a href="https://wa.me/905000000000" class="wa-float" target="_blank" title="WhatsApp'tan iletiÅŸime geÃ§">ðŸ“±</a>
<div id="cart-sidebar">
<div style="display:flex; justify-content:space-between; align-items:center; border-bottom:2px solid #f4f4f4; padding-bottom:15px; margin-bottom:15px;">
<h3 style="margin:0; font-size:18px;">Sepetim</h3>
<button style="font-size:28px; cursor:pointer; background:none; border:none; color:#999; transition:0.2s;"
onclick="window.toggleCart(false)" title="Sepeti kapat">Ã—</button>
</div>
<div id="cart-items" style="flex-grow:1; overflow-y:auto; padding:0;"></div>
<div style="border-top:2px solid #eee; padding-top:20px;">
<div style="display:flex; justify-content:space-between; font-size:18px; font-weight:800; color:var(--bordo); margin-bottom:20px;">
<span>Toplam:</span>
<span><span id="cart-total">0.00</span> â‚º</span>
</div>
<button id="checkout-btn" style="width:100%; background:var(--success); color:white; border:none; padding:15px; border-radius:6px; font-weight:bold; cursor:pointer; font-size:16px; transition:0.2s;"
onclick="window.checkout()" disabled>SipariÅŸi Tamamla</button>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabaseUrl = "https://eqpioawtdwkaeuxpfspt.supabase.co";
const supabaseKey = "sb_publishable_j1qHO04E6qvGJxoQksdHlA_p89plyCA";
const _supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
let masterData = [];
let cart = JSON.parse(localStorage.getItem('aysima_cart')) || [];
// Sepet aÃ§/kapat
window.toggleCart = (show) => {
document.getElementById("cart-sidebar").classList.toggle("open", show);
document.getElementById("overlay").classList.toggle("active", show);
};
// Varyant seÃ§
window.updateCard = (btn, price, vid, vname, stock) => {
const card = btn.closest(".card");
card.querySelectorAll(".v-btn").forEach(b => b.classList.remove("selected"));
btn.classList.add("selected");
card.querySelector(".price-display").textContent = price + " â‚º";
const buyBtn = card.querySelector(".buy-btn");
buyBtn.setAttribute("data-v-id", vid);
buyBtn.setAttribute("data-v-price", price);
buyBtn.setAttribute("data-v-name", vname);
if(stock <= 0) {
buyBtn.disabled = true;
buyBtn.textContent = "TÃœKENDÄ°";
} else {
buyBtn.disabled = false;
buyBtn.textContent = "SEPETE EKLE";
}
};
// Sepete ekle
window.addToCart = (pid, pname, btn) => {
const vid = btn.getAttribute("data-v-id");
const vprice = parseFloat(btn.getAttribute("data-v-price"));
const vname = btn.getAttribute("data-v-name");
if (!vid || vid === "null") {
alert("LÃ¼tfen bir varyant seÃ§in.");
return;
}
const existing = cart.find(i => i.vid === vid && i.pid === pid);
if (existing) {
existing.qty++;
} else {
cart.push({ pid, pname, vid, vname, vprice, qty: 1 });
}
localStorage.setItem('aysima_cart', JSON.stringify(cart));
window.updateCartUI();
window.toggleCart(true);
};
// Sepet UI gÃ¼ncelle
window.updateCartUI = () => {
const itemsDiv = document.getElementById("cart-items");
let total = 0, count = 0;
if(cart.length === 0) {
itemsDiv.innerHTML = '<div class="empty-cart">Sepetiniz boÅŸ</div>';
document.getElementById("checkout-btn").disabled = true;
return;
}
itemsDiv.innerHTML = "";
cart.forEach((item, idx) => {
total += item.vprice * item.qty;
count += item.qty;
itemsDiv.innerHTML += `
`;
});
document.getElementById("cart-total").textContent = total.toFixed(2);
document.getElementById("cart-count").textContent = count;
document.getElementById("checkout-btn").disabled = false;
};
// Sepetten Ã§Ä±kar
window.remove = (i) => {
cart.splice(i, 1);
localStorage.setItem('aysima_cart', JSON.stringify(cart));
window.updateCartUI();
};
// Ara
window.doSearch = (t) => {
if(t.trim() === '') {
renderProducts(masterData);
} else {
renderProducts(masterData.filter(p => p.name.toLowerCase().includes(t.toLowerCase())));
}
};
// SipariÅŸ tamamla
window.checkout = () => {
if(cart.length === 0) {
alert("Sepetiniz boÅŸ!");
return;
}
alert("SipariÅŸ iÅŸlemleri kÄ±sa sÃ¼rede aktifleÅŸtirilecektir. TeÅŸekkÃ¼r ederiz!");
// TODO: Burada Ã¶deme sistemi entegrasyonu yapÄ±lacak
};
// BaÅŸlat
async function init() {
try {
const { data: cats, error } = await _supabase.from("categories").select("*");
if(error) {
console.error("Kategori yÃ¼kleme hatasÄ±:", error);
document.getElementById("product-grid").innerHTML = "ÃœrÃ¼nler yÃ¼klenemedi. LÃ¼tfen sayfayÄ± yenileyin.";
return;
}
cats?.forEach(c => {
const a = document.createElement("a");
a.className = "nav-link";
a.textContent = c.name.toUpperCase();
a.onclick = () => fetchProducts(c.id, c.name);
document.getElementById("navbar").appendChild(a);
});
fetchProducts();
window.updateCartUI();
} catch(e) {
console.error("BaÅŸlatma hatasÄ±:", e);
}
}
async function fetchProducts(cid = null, cname = "TÃ¼m ÃœrÃ¼nler") {
try {
document.getElementById("page-name").textContent = cname;
const grid = document.getElementById("product-grid");
grid.innerHTML = "ÃœrÃ¼nler hazÄ±rlanÄ±yor...";
let q = _supabase.from("products").select("*, product_variants(*)").eq("is_active", true);
if(cid) q = q.eq("category_id", cid);
const { data, error } = await q;
if(error) throw error;
masterData = data || [];
renderProducts(masterData);
} catch(e) {
console.error("ÃœrÃ¼n yÃ¼kleme hatasÄ±:", e);
document.getElementById("product-grid").innerHTML = "ÃœrÃ¼nler yÃ¼klenemedi.";
}
}
function renderProducts(list) {
const container = document.getElementById("product-grid");
if(list.length === 0) {
container.innerHTML = '<div style="grid-column:1/-1; text-align:center; padding:40px; color:#999;">ÃœrÃ¼n bulunamadÄ±.</div>';
return;
}
container.innerHTML = "";
list.forEach(p => {
const vars = p.product_variants.filter(v => v.is_active);
const def = vars[0] || { price: 0, variant_value: '-', id: 'null', stock: 0 };
const card = document.createElement("div");
card.className = "card";
card.innerHTML = `
`;
container.appendChild(card);
});
}
// XSS korumasÄ±
function escapeHtml(text) {
const map = {
'&': '&amp;',
'<': '&lt;',
'>': '&gt;',
'"': '&quot;',
"'": '&#039;'
};
return text.replace(/[&<>"']/g, m => map[m]);
}
init();
</script>
</body>
</html>
