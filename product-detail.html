<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ürün Detayı | AYSİMA MEDİKAL</title>

<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
body { background:#f6f7fb; font-family:Segoe UI; }

/* ANA WRAPPER */
.detail-wrapper {
    max-width:1200px;
    margin:40px auto;
    background:white;
    padding:30px;
    border-radius:15px;
    display:flex;
    gap:40px;
    box-shadow:0 10px 30px rgba(0,0,0,0.05);
}

/* GALERİ */
.gallery { flex:1; }
.main-image {
    width:100%;
    border-radius:12px;
    background:#fafafa;
    padding:20px;
}
.main-image img {
    width:100%;
    object-fit:contain;
    transition:0.3s;
}
.main-image img:hover { transform:scale(1.05); }

.thumbs {
    display:flex;
    gap:10px;
    margin-top:15px;
}
.thumbs img {
    width:70px;
    border-radius:8px;
    cursor:pointer;
    border:2px solid transparent;
}
.thumbs img:hover { border-color:#7b1e2b; }

/* BİLGİ BLOĞU */
.info { flex:1; }

.product-title {
    font-size:26px;
    font-weight:800;
    margin-bottom:10px;
}

.price {
    font-size:32px;
    color:#7b1e2b;
    font-weight:800;
    margin:15px 0;
}

.stock {
    background:#eafaf1;
    color:#27ae60;
    padding:8px 12px;
    border-radius:6px;
    font-size:13px;
    display:inline-block;
    margin-bottom:15px;
}

.qty-control {
    display:flex;
    gap:10px;
    margin:20px 0;
}

.qty-control button {
    width:40px;
    height:40px;
    border:none;
    background:#eee;
    font-size:18px;
    cursor:pointer;
}

.qty-control span {
    padding:10px 20px;
    background:#fafafa;
}

.add-btn, .buy-btn {
    width:100%;
    padding:15px;
    font-size:16px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    margin-top:10px;
}

.add-btn { background:#7b1e2b; color:white; }
.buy-btn { background:#27ae60; color:white; }

/* GÜVEN BLOĞU */
.trust {
    display:flex;
    gap:20px;
    margin-top:20px;
    font-size:13px;
    color:#555;
}
.trust div { display:flex; align-items:center; gap:5px; }

/* TAB ALANI */
.tabs {
    max-width:1200px;
    margin:40px auto;
    background:white;
    padding:25px;
    border-radius:12px;
}

.tab-buttons {
    display:flex;
    gap:20px;
    border-bottom:1px solid #eee;
}

.tab-buttons button {
    border:none;
    background:none;
    padding:10px;
    cursor:pointer;
    font-weight:600;
}

.tab-content { margin-top:20px; }

/* MOBİL */
@media(max-width:768px){
.detail-wrapper{flex-direction:column;}
}
</style>
</head>

<body>

<header style="background:white;padding:15px 5%;border-bottom:1px solid #eee;">
<b onclick="window.location='index.html'" style="cursor:pointer;color:#7b1e2b;">AYSİMA MEDİKAL</b>
</header>

<div class="detail-wrapper">

<div class="gallery">
<div class="main-image">
<img id="main-img">
</div>
<div class="thumbs" id="thumbs"></div>
</div>

<div class="info">

<h1 id="title" class="product-title"></h1>
<div class="price" id="price"></div>
<div class="stock">✔ Stokta Var</div>

<div class="qty-control">
<button onclick="changeQty(-1)">-</button>
<span id="qty">1</span>
<button onclick="changeQty(1)">+</button>
</div>

<button class="add-btn" onclick="addProduct()">Sepete Ekle</button>
<button class="buy-btn" onclick="buyNow()">Hemen Satın Al</button>

<div class="trust">
<div><i class="fas fa-shield-alt"></i> Güvenli Alışveriş</div>
<div><i class="fas fa-truck"></i> Hızlı Kargo</div>
<div><i class="fas fa-undo"></i> Kolay İade</div>
</div>

</div>
</div>

<div class="tabs">
<div class="tab-buttons">
<button onclick="openTab('desc')">Açıklama</button>
<button onclick="openTab('features')">Özellikler</button>
</div>
<div id="desc" class="tab-content"></div>
<div id="features" class="tab-content" style="display:none;">Ürün özellikleri yakında.</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="js/config.js"></script>
<script src="js/cart.js"></script>

<script>
let productData;
let qty=1;

function changeQty(val){
qty+=val;
if(qty<1) qty=1;
document.getElementById("qty").innerText=qty;
}

function addProduct(){
addToCart({
id:productData.id,
name:productData.name,
price:productData.price,
image_url:productData.image_url,
qty:qty
});
}

function buyNow(){
addProduct();
window.location="index.html";
}

function openTab(tab){
document.querySelectorAll(".tab-content").forEach(t=>t.style.display="none");
document.getElementById(tab).style.display="block";
}

async function loadProduct(){
const params=new URLSearchParams(window.location.search);
const id=params.get("id");

const {data}=await window.supabaseClient.from("products").select("*").eq("id",id).single();
productData=data;

document.getElementById("title").innerText=data.name;
document.getElementById("price").innerText=data.price+" ₺";
document.getElementById("main-img").src=data.image_url;
document.getElementById("desc").innerText=data.description||"Açıklama bulunmuyor.";

}
loadProduct();
</script>

</body>
</html>
